
_std_ :: import std;

pre_main :: func()
{
    _std_._open_default_io_handles();
    return;
}

#if (PLATFORM_WINDOWS) {

    mainCRTStartup :: func ()
    {
        // call_main_and_exit();
        pre_main();
        @exit(main());
    }

} #elseif (PLATFORM_LINUX) {

    #noreturn call_main_and_exit :: func ()
    {
        @exit(main());
    }

    #naked #noreturn _start :: func ()
    {
        pre_main();
        call_main_and_exit();
    }

} #else {
    @static_assert(false);
}

