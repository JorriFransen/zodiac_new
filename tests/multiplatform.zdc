
std :: import std;

main :: func() -> s64 {
    std.print("Hello, World! from multiple platforms...\n");

    std.print("Returning: ");
    std.print_num(42);
    std.print("\n");
    
    return 42;
}

#noreturn call_main_and_exit :: func() {
    std._open_default_io_handles();

    exit_code := main();
    @exit(exit_code);
}

#if (PLATFORM_WINDOWS) {
    // windows :: import windows;

    mainCRTStartup :: func () {
        call_main_and_exit();
    }

} #elseif (PLATFORM_LINUX) {

    #naked #noreturn _start :: func () {
        call_main_and_exit();
    }

} #else {
    @static_assert(false);
}
 
