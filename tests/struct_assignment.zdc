
std :: import std;

#run main();

Dummy :: struct
{
    val : s64;
}

Vec2 :: struct
{
    x : s64;
    y : s64;
}

main :: func() -> s64
{
    std.print("Struct assignment test\n");

    a := make_vec2(11, 22);
    @assert(a.x == 11);
    @assert(a.y == 22);

    b := a;
    @assert(b.x == 11);
    @assert(b.y == 22);

    b.x *= 2;
    b.y *= 2;
    @assert(b.x == 22);
    @assert(b.y == 44);

    c : Vec2;
    c.x = 12345678;
    c.y = 87654321;
    @assert(c.x == 12345678);
    @assert(c.y == 87654321);

    c = b;
    @assert(c.x == 22);
    @assert(c.y == 44);

    std.print("a: ");
    print_vec2(a);

    std.print("b: ");
    print_vec2(b);

    std.print("c: ");
    print_vec2(c);

    std.print("\n");
    return 0;
}

make_vec2 :: func (x: s64, y: s64) -> Vec2
{
    r : Vec2;
    r.x = x;
    r.y = y;
    return r;
}

print_vec2 :: func(v : Vec2)
{
    std.print("x: ");
    std.print_num(v.x);
    std.print(", y: ");
    std.print_numln(v.y);
}
